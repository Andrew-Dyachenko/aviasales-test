{"version":3,"sources":["components/UI/Header.js","components/UI/Filter.js","components/UI/Modificator.js","components/UI/Loader.js","components/UI/StopList.js","components/UI/ButtonsGroup.js","components/UI/CurrencySymbol.js","helpers/dddCapitalize.js","components/CanvasAirplane.js","components/UI/Ticket.js","components/UI/TicketsList.js","store/constants.js","store/actions.js","components/containers.js","components/UI/Tickets.js","components/App.js","helpers/getStops.js","helpers/fetch.js","helpers/sort.js","store/reducers.js","helpers/fetchStates.js","store/index.js","serviceWorker.js","index.js","assets/images/turkish-airlines-logo.svg","assets/images/logo.png"],"names":["Header","children","logo","mixin","className","href","src","alt","defaultProps","Filter","Array","isArray","map","child","index","key","Modificator","Loader","StopsList","filters","stops","title","fetching","onAllStops","onStop","onOnly","_stops","Infinity","length","stop","text","isFinite","pluralize","type","data-stops","onClick","htmlFor","id","onChange","value","checked","indexOf","f","ButtonsGroup","buttons","name","onCheck","button","defaultChecked","disabled","CurrencySymbol","charSymbol","currency","char","dddCapitalize","ddd","replace","string","toLowerCase","charAt","toUpperCase","slice","CanvasAirplane","height","width","adaptive","autoRepeat","workType","delayOnRepeat","colors","speedExhaustCloud","lengthExhaustCloud","planeScaleOnGroundKof","apexDot1","apexDot2","speedFlight","runWayK","runwayType","fireJetFlag","plumeeExColors","level","color","plumeeInColors","planeColor","cloudColor","backgroundColor","runwayColor","residueDelOnRpt","state","progress","updateAnimationState","bind","canvasRef","React","createRef","this","rAF","requestAnimationFrame","canvas","current","w","wRelToAbs","items","resizeToParentSize","realPlaneHeight","realPlaneWidth","getProgress","planeScale","getPlaneScale","flyFlag","clearCanvas","drawBackground","animatRunway","animatExhaustCloud","drawFireJet","drawPlane","dotEndFly","getDotEndFly","addOpacityToColor","substring","setState","prevState","parentNode","offsetWidth","offsetHeight","cancelAnimationFrame","ref","PureComponent","x","hRelToAbs","y","getContext","clearRect","ctx","fillStyle","fillRect","h","p1","Path2D","p","t","document","createElementNS","createSVGMatrix","scale","addPath","save","translate","C","planeHeight","fill","restore","ellipseHeightWidth","exEllipseHeight","exEllipseWidth","gradient","createGradient","drawEllipse","beginPath","arc","Math","PI","closePath","stopColors","startGradWidth","stopGradWidth","createLinearGradient","forEach","stopLevel","addColorStop","itemInitX","itemInitY","createExhaustCloud","drawExhaustCloud","item","drawExhaustItem","valItemOnItr","maxValItem","lengthItems","nextlengthItems","random","rand","defaultSpeedX","defaultSpeedY","itemRadius","i","createExhaustItem","radius","array","percent","speedY","speedX","k0","k1","offset","drawRunway","runwayWidth","rwDachSpac","lineWidth","strokeStyle","setLineDash","moveTo","lineTo","stroke","a","b","stringOpacity","round","toString","wtFlyFromAToB","wtForeverFlyFromA","wtForeverFly","defaultPlaneScale","planeScaleOnGround","planeOnGroundFlag","plnOnGndTime","planeOnUpFlag","planeOnDownFlag","kefOnUp","kefUnDown","Ticket","price","currencies","departure_time","arrival_time","origin","origin_name","destination","destination_name","arrival_date","departure_date","rates","stopsText","adaptedPrice","toFixed","parse","format","locale","filter","RUB","TicketsList","modificators","tickets","dimensions","list","fetch","error","ticket","sort","constants","FETCH_TICKETS_START","FETCH_TICKETS_SUCCESS","FETCH_TICKETS_ERROR","SET_TICKETS","FILTER_BY_DEFAULT_STOPS","FILTER_BY_STOPS","FILTER_BY_ONLY_STOPS","FILTER_BY_ALL_STOPS","FETCH_CURRENCY_START","FETCH_CURRENCY_SUCCESS","FETCH_CURRENCY_ERROR","SET_DEFAULT_CURRENCY","SET_BASE_CURRENCY","SET_CURRENCY_RATES","SET_CURRENCY_MODIFIERS","SET_CURRENCY_MODIFIER","ADD_CURRENCY_MODIFIER","REMOVE_CURRENCY_MODIFIER","SET_SCROLL_DIAMENTIONS","setScrollDimensions","Stops","connect","dispatch","event","target","Number","filterByStops","dataset","filterByOnlyStops","window","store","getState","filterByAllStops","StopList","Currencies","isBase","base","Object","keys","some","rate","hasRateData","TicketsListContainer","Tickets","App","storage","localStorage","JSON","fetched","props","fetchTickets","fetchCurrency","scrollbarWidth","scroll","Helmet","lang","onLoad","scrollbarSizeLoad","scrollbarSizeChange","scrollbarHeight","innerWidth","direction","url","then","response","json","setCurrencyRates","catch","setTickets","sortArrayByNumeric","getStopsFromTickets","compose","reduce","reduced","action","stopsFilter","_stop","stopsFilterWithSort","sortArrayByNumericWrapper","baseСurrency","currencyRates","currencyModifier","currencyModifiersList","currencyModifiers","scrollDimensions","saver","next","result","stringify","storeFactory","initialState","stateData","applyMiddleware","thunk","createStore","combineReducers","Boolean","location","hostname","match","render","getElementById","navigator","serviceWorker","ready","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.91a15050.chunk.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport '../../assets/styles/Header.scss'\n\nconst Header = ({ children, logo, mixin }) => {\n\tconst className = mixin ?\n\t\t`header ${mixin}` :\n\t\t'header'\n\treturn (\n\t\t<header className={className}>\n\t\t\t<a href='https://www.aviasales.ru/' className='header__logo'>\n\t\t\t\t<img src={logo} className='header__logo-img' alt='Logo'/>\n\t\t\t</a>\n\t\t\t{\n\t\t\t\tchildren ?\n\t\t\t\t\t<div className='header__content'>\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</div> :\n\t\t\t\t\tnull\n\t\t\t}\n\t\t</header>\n\t)\n}\n\nHeader.defaultProps = {\n\tchildren: null,\n\tlogo: '',\n\tmixin: ''\n}\n\nHeader.propTypes = {\n\tchildren: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf(PropTypes.node),\n\t\tPropTypes.node,\n\t\tPropTypes.string\n\t]),\n\tlogo: PropTypes.string,\n\tmixin: PropTypes.string\n}\n\nexport default Header\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport '../../assets/styles/Filter.scss'\n\nconst Filter = ({ children }) =>\n\t<div className='filter'>\n\t\t{\n\t\t\tArray.isArray(children) ?\n\t\t\t\tchildren.map((child, index) =>\n\t\t\t\t\t<div key={index} className='filter__child'>\n\t\t\t\t\t\t{ child }\n\t\t\t\t\t</div>\n\t\t\t\t) :\n\t\t\t\t<div className='filter__child'>\n\t\t\t\t\t{ children }\n\t\t\t\t</div>\n\t\t}\n\t</div>\n\nFilter.defaultProps = {\n\tchildren: null\n}\n\nFilter.propTypes = {\n\tchildren: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf(PropTypes.node),\n\t\tPropTypes.node,\n\t\tPropTypes.object\n\t])\n}\n\nexport default Filter\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport '../../assets/styles/Modificator.scss'\n\nconst Modificator = ({ children }) =>\n\tArray.isArray(children) ?\n\t\tchildren.map((child, index) =>\n\t\t\t<div key={index} className='modificator__children'>\n\t\t\t\t{ child }\n\t\t\t</div>\n\t\t) :\n\t\t<div className='modificator__children'>\n\t\t\t{ children }\n\t\t</div>\n\nModificator.defaultProps = {\n\tchildren: null\n}\n\nModificator.propTypes = {\n\tchildren: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf(PropTypes.node),\n\t\tPropTypes.node,\n\t\tPropTypes.object\n\t])\n}\n\nexport default Modificator\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport '../../assets/styles/Loader.scss'\n\nconst Loader = ({children}) =>\n\t<div className=\"loader\">\n\t\t<div className=\"loader__text\">\n\t\t\t{children}\n\t\t</div>\n\t</div>\n\nLoader.defaultProps = {\n\tchildren: 'Loading'\n}\n\nLoader.propTypes = {\n\tchildren: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf(PropTypes.node),\n\t\tPropTypes.node,\n\t\tPropTypes.string\n\t])\n}\n\nexport default Loader\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport '../../assets/styles/StopList.scss'\nimport pluralize from 'pluralize-ru'\nimport Loader from './Loader'\n\nconst StopsList = ({\n\tfilters,\n\tstops,\n\ttitle,\n\tmixin,\n\tfetching,\n\tonAllStops,\n\tonStop,\n\tonOnly\n}) => {\n\tconst _stops = [Infinity, ...stops]\n\tconst { length } = stops\n\tconst className =  mixin ?\n\t\t`stop-list ${mixin}` :\n\t\t'stop-list'\n\treturn (\n\t\t<form className={className}>\n\t\t\t{\n\t\t\t\ttitle ?\n\t\t\t\t\t<h4 className='stop-list__title'>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</h4> :\n\t\t\t\t\tnull\n\t\t\t}\n\t\t\t{\n\t\t\t\tfetching ?\n\t\t\t\t\t<Loader /> :\n\t\t\t\t\tlength ?\n\t\t\t\t\t\t<div className='stop-list__container'>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t_stops.map((stop, index) => {\n\t\t\t\t\t\t\t\t\tconst text = isFinite(stop)\n\t\t\t\t\t\t\t\t\t\t? pluralize(stop, 'Без пересадок', '%d пересадка', '%d пересадки', '%d пересадок')\n\t\t\t\t\t\t\t\t\t\t: 'Все'\n\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<div key={index} className='stop-list__item'>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tindex ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button type='button' className='stop-list__only' data-stops={index - 1} onClick={onOnly}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tТолько\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button> :\n\t\t\t\t\t\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\t\t\thtmlFor={`stop-list__input_${index}`}\n\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='stop-list__label'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='stop-list__wrapper'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='stop-list__input'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={`stop-list__input_${index}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={index ? onStop : onAllStops}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={stop}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? filters.indexOf(stop) !== -1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: filters.length === stops.length } />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='stop-list__face-wrapper'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='stop-list__face' />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='stop-list__text'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{text}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div> :\n\t\t\t\t\t\tnull\n\t\t\t}\n\t\t</form>\n\t)\n}\n\nStopsList.defaultProps = {\n\tfilters: [],\n\tstops: [],\n\ttitle: '',\n\tmixin: '',\n\tfetching: false,\n\tonStop: f => f,\n\tonOnly: f => f,\n\tonAllStops: f => f\n}\n\nStopsList.propTypes = {\n\tfilters: PropTypes.array,\n\tstops: PropTypes.array,\n\ttitle: PropTypes.string,\n\tmixin: PropTypes.string,\n\tfetching: PropTypes.bool,\n\tonStop: PropTypes.func,\n\tonOnly: PropTypes.func,\n\tonAllStops: PropTypes.func\n}\n\nexport default StopsList\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport '../../assets/styles/ButtonsGroup.scss'\n\nconst ButtonsGroup = ({ buttons, name, title, onCheck }) => {\n\tconst { length } = buttons\n\treturn (\n\t\t<div className='buttons-group'>\n\t\t\t{\n\t\t\t\ttitle ?\n\t\t\t\t\t<h4 className='buttons-group__title'>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</h4> :\n\t\t\t\t\tnull\n\t\t\t}\n\t\t\t{\n\t\t\t\tlength ?\n\t\t\t\t\t<div className='buttons-group__container'>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbuttons.map((button, index) => {\n\t\t\t\t\t\t\t\tconst { text, defaultChecked, disabled } = button\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div key={index} className='buttons-group__item'>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tclassName='buttons-group__input'\n\t\t\t\t\t\t\t\t\t\t\tvalue={text}\n\t\t\t\t\t\t\t\t\t\t\ttype='radio'\n\t\t\t\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\t\t\t\tid={`buttons-group__input_${index}`}\n\t\t\t\t\t\t\t\t\t\t\tonChange={onCheck}\n\t\t\t\t\t\t\t\t\t\t\tdefaultChecked={defaultChecked}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={disabled} />\n\t\t\t\t\t\t\t\t\t\t<label htmlFor={`buttons-group__input_${index}`} className='buttons-group__label'>\n\t\t\t\t\t\t\t\t\t\t\t<span className='buttons-group__text'>\n\t\t\t\t\t\t\t\t\t\t\t\t{text}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<div className='buttons-group__state'></div>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</div> :\n\t\t\t\t\tnull\n\t\t\t}\n\t\t</div>\n\t)\n}\n\nButtonsGroup.defaultProps = {\n\tbuttons: [],\n\tname: 'radio-group',\n\ttitle: '',\n\tfetching: false,\n\tonCheck: f => f\n}\n\nButtonsGroup.propTypes = {\n\tbuttons: PropTypes.array,\n\tname: PropTypes.string,\n\ttitle: PropTypes.string,\n\tfetching: PropTypes.bool,\n\tonCheck: PropTypes.func\n}\n\nexport default ButtonsGroup\n","import React, { Fragment } from 'react'\nimport PropTypes from 'prop-types'\n\nconst char = currency => {\n\tswitch(currency) {\n\t\tcase 'USD':\n\t\t\treturn '$'\n\n\t\tcase 'EUR':\n\t\t\treturn '€'\n\n\t\tdefault:\n\t\t\treturn '₽'\n\t}\n}\nconst CurrencySymbol = ({ currency }) => {\n\tconst charSymbol = char(currency)\n\treturn (\n\t\t<Fragment>\n\t\t\t{ charSymbol }\n\t\t</Fragment>\n\t)\n}\n\nCurrencySymbol.propTypes = {\n\tcurrency: PropTypes.string\n}\n\nCurrencySymbol.defaultProps = {\n\tcurrency: 'RUB'\n}\n\nexport default CurrencySymbol\n","const dddCapitalize = ddd => {\n\tif (ddd) {\n\t\tconst result = ddd.replace(/(пн|вт|ср|чт|пт|сб|вс)$/gi, string => string\n\t\t\t.toLowerCase()\n\t\t\t.charAt(0)\n\t\t\t.toUpperCase() + string.slice(1))\n\n\t\treturn result;\n\t}\n\treturn ddd\n}\n\nexport default dddCapitalize\n","/*eslint no-console: 0*/\r\nimport React from 'react'\r\nimport { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nexport default class CanvasAirplane extends PureComponent {\r\n\tconstructor({\r\n\t\theight = 13,\r\n\t\twidth = 156,\r\n\t\tadaptive = true, //включить адаптивность\r\n\t\tautoRepeat = true, //автоповторение (для режима 20)\r\n\t\tworkType = 10, //типы работы: 10 - бесконечный полет сразу в 2/3 от А\r\n\t\t//  \t\t\t11 - бесеонечный полет в начале анимации стартует из точки А\r\n\t\t//\t\t\t\t20 - взлет из А и посадка в Б\r\n\t\tdelayOnRepeat = 300, //задержка на автоповтор\r\n\t\tcolors = {}, //цветовое оформление\r\n\t\tspeedExhaustCloud = 27, //скорость шлейфа самолета\r\n\t\tlengthExhaustCloud = 100, //длина шлейфа самолета (от 0 до 1000),\r\n\t\t// !фактическая длина зависит также от скорости шлейфа, 0 - нет шлейфа\r\n\t\tplaneScaleOnGroundKof = 1, //коэфициент уменьшения самолета на 'земле'\r\n\t\t//  в воздухе размер фиксировано в 0.9 от ширины canvas\r\n\t\tapexDot1 = 10, // точка в которой самолет 'наберет высоту' считая от начала, процент от общей длины\r\n\t\tapexDot2 = 10, // точка в кторой самолет 'начнет снижаться' считая от конца, процент от общей длины\r\n\t\tspeedFlight = 0.25, //скорость полета самолета (от 0 до 100)\r\n\t\trunWayK = 0, //длительность анимации взлетнопопсадочной полосы от 0 до 50, 0 - полосы отсутствуют\r\n\t\trunwayType = 0, // тип взлетно-посадочной полосы 0 / 1\r\n\t\tfireJetFlag = false //показывать реактивное сопло\r\n\t}) {\r\n\t\tsuper()\r\n\t\tcolors.plumeeExColors = colors.plumeeExColors || [\r\n\t\t\t//цвет внешнего 'пламени' двигателя (градиент)\r\n\t\t\t{ level: 1, color: '#d2d5d6' },\r\n\t\t\t{ level: 0, color: '#d2d5d6' }\r\n\t\t]\r\n\t\tcolors.plumeeInColors = colors.plumeeInColors || [\r\n\t\t\t//цвет внутреннего 'пламени' двигателя (градиент)\r\n\t\t\t{ level: 1, color: '#a8abac' },\r\n\t\t\t{ level: 0, color: '#a8abac' }\r\n\t\t]\r\n\t\tcolors.planeColor = colors.planeColor || '#d2d5d6' //цвет самолета !!HEX!! формат обезателен для этого параметра\r\n\t\tcolors.cloudColor = colors.cloudColor || '#dbdedf' //цвет шлейфа !!HEX!! формат обезателен для этого параметра\r\n\t\tcolors.backgroundColor = colors.backgroundColor || '#ffffff' //цвет фона\r\n\t\tcolors.runwayColor = colors.runwayColor || '#d2d5d6' //цвет взлетнопосадочной полосы !!HEX!! формат обезателен для этого параме\r\n\t\t//внутренние параметры\r\n\t\tlet progress = 0,\r\n\t\t\tresidueDelOnRpt = delayOnRepeat\r\n\r\n\t\tthis.state = {\r\n\t\t\theight,\r\n\t\t\twidth,\r\n\t\t\tprogress,\r\n\t\t\tadaptive,\r\n\t\t\tautoRepeat,\r\n\t\t\tworkType,\r\n\t\t\tresidueDelOnRpt,\r\n\t\t\tdelayOnRepeat,\r\n\t\t\tcolors,\r\n\t\t\tspeedExhaustCloud,\r\n\t\t\tlengthExhaustCloud,\r\n\t\t\trunwayType,\r\n\t\t\tplaneScaleOnGroundKof,\r\n\t\t\tapexDot1,\r\n\t\t\tapexDot2,\r\n\t\t\tspeedFlight,\r\n\t\t\tfireJetFlag,\r\n\t\t\trunWayK\r\n\t\t}\r\n\t\tthis.updateAnimationState = this.updateAnimationState.bind(this)\r\n\t\tthis.canvasRef = React.createRef()\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.rAF = requestAnimationFrame(this.updateAnimationState)\r\n\t}\r\n\r\n\tupdateAnimationState() {\r\n\t\tconst canvas = this.canvasRef.current,\r\n\t\t\tw = wRelToAbs(canvas)\r\n\t\tlet {\r\n\t\t\tprogress,\r\n\t\t\tadaptive,\r\n\t\t\tautoRepeat,\r\n\t\t\tworkType,\r\n\t\t\tdelayOnRepeat,\r\n\t\t\tresidueDelOnRpt,\r\n\t\t\tcolors,\r\n\t\t\titems,\r\n\t\t\tspeedExhaustCloud,\r\n\t\t\trunwayType,\r\n\t\t\tplaneScaleOnGroundKof,\r\n\t\t\tapexDot1,\r\n\t\t\tapexDot2,\r\n\t\t\tspeedFlight,\r\n\t\t\tfireJetFlag,\r\n\t\t\trunWayK\r\n\t\t} = this.state\r\n\r\n\t\tlet lengthExhaustCloud = canvas.width - 17\r\n\t\t// console.log('lengthExhaustCloud: ', lengthExhaustCloud)\r\n\r\n\t\tif (adaptive) this.resizeToParentSize(canvas)\r\n\r\n\t\tlet realPlaneHeight = canvas.height * 0.9,\r\n\t\t\trealPlaneWidth = realPlaneHeight * 1.2\r\n\r\n\t\tprogress = getProgress(canvas, progress, workType, realPlaneWidth)\r\n\r\n\t\tlet { planeScale } = getPlaneScale(\r\n\t\t\tcanvas,\r\n\t\t\tprogress,\r\n\t\t\tapexDot1,\r\n\t\t\tapexDot2,\r\n\t\t\tplaneScaleOnGroundKof\r\n\t\t),\r\n\t\t\tflyFlag = progress < canvas.width - realPlaneWidth\r\n\r\n\t\tclearCanvas(canvas)\r\n\t\tdrawBackground(canvas, colors)\r\n\t\tif (progress < w(runWayK) || progress + realPlaneWidth > w(100 - runWayK))\r\n\t\t\tanimatRunway(canvas, progress, runWayK, colors, runwayType)\r\n\t\titems = animatExhaustCloud(\r\n\t\t\tcanvas,\r\n\t\t\titems,\r\n\t\t\tflyFlag,\r\n\t\t\tprogress,\r\n\t\t\tspeedExhaustCloud,\r\n\t\t\tlengthExhaustCloud,\r\n\t\t\tcolors\r\n\t\t)\r\n\t\tif (flyFlag && fireJetFlag)\r\n\t\t\tdrawFireJet(canvas, progress, colors, realPlaneHeight)\r\n\t\tdrawPlane(canvas, planeScale, progress, colors.planeColor)\r\n\r\n\t\tlet dotEndFly = getDotEndFly(canvas, workType, realPlaneWidth)\r\n\t\tprogress =\r\n\t\t\tprogress >= dotEndFly\r\n\t\t\t\t? progress\r\n\t\t\t\t: progress + (speedFlight * canvas.width) / 100\r\n\r\n\t\tif (autoRepeat && progress >= canvas.width - realPlaneWidth) {\r\n\t\t\tresidueDelOnRpt--\r\n\r\n\t\t\t//плавное исчезание самолета и взлетной полосы\r\n\t\t\tcolors.planeColor = addOpacityToColor(\r\n\t\t\t\tcolors.planeColor,\r\n\t\t\t\tresidueDelOnRpt / delayOnRepeat\r\n\t\t\t)\r\n\t\t\tcolors.runwayColor = addOpacityToColor(\r\n\t\t\t\tcolors.runwayColor,\r\n\t\t\t\tresidueDelOnRpt / delayOnRepeat\r\n\t\t\t)\r\n\r\n\t\t\tif (residueDelOnRpt < 1) {\r\n\t\t\t\tresidueDelOnRpt = delayOnRepeat\r\n\t\t\t\tprogress = 0\r\n\t\t\t\tcolors.planeColor = colors.planeColor.substring(0, 7)\r\n\t\t\t\tcolors.runwayColor = colors.runwayColor.substring(0, 7)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setState(prevState => ({\r\n\t\t\t...prevState,\r\n\t\t\tprogress,\r\n\t\t\tresidueDelOnRpt,\r\n\t\t\tcolors,\r\n\t\t\titems\r\n\t\t}))\r\n\t\tthis.rAF = requestAnimationFrame(this.updateAnimationState)\r\n\t}\r\n\r\n\t//делаем ресайз под родительский контейнер\r\n\tresizeToParentSize(canvas) {\r\n\t\tlet parentNode = canvas.parentNode,\r\n\t\t\twidth = parentNode.offsetWidth,\r\n\t\t\theight = parentNode.offsetHeight\r\n\r\n\t\tcanvas.width = width\r\n\t\tcanvas.height = height\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tcancelAnimationFrame(this.rAF)\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<canvas\r\n\t\t\t\tref={this.canvasRef}\r\n\t\t\t\twidth={this.state.width}\r\n\t\t\t\theight={this.state.height}\r\n\t\t\t/>\r\n\t\t)\r\n\t}\r\n}\r\nCanvasAirplane.propTypes = {\r\n\twhSize: PropTypes.number,\r\n\tlevel: PropTypes.number,\r\n\tid: PropTypes.string,\r\n\theight: PropTypes.number,\r\n\twidth: PropTypes.number,\r\n\tadaptive: PropTypes.bool,\r\n\tautoRepeat: PropTypes.bool,\r\n\tworkType: PropTypes.number,\r\n\tdelayOnRepeat: PropTypes.number,\r\n\tcolors: PropTypes.object,\r\n\tspeedExhaustCloud: PropTypes.number,\r\n\tlengthExhaustCloud: PropTypes.number,\r\n\tplaneScaleOnGroundKof: PropTypes.number,\r\n\tapexDot1: PropTypes.number,\r\n\tapexDot2: PropTypes.number,\r\n\tspeedFlight: PropTypes.number,\r\n\trunWayK: PropTypes.number,\r\n\trunwayType: PropTypes.number,\r\n\tfireJetFlag: PropTypes.bool\r\n}\r\n\r\n//функции преобразования из относительных (от длины/шрины) величин в абсолютные\r\nconst wRelToAbs = canvas => x => {\r\n\tconst dotWidth = canvas.width / 100\r\n\tx = x * dotWidth\r\n\treturn x\r\n},\r\n\thRelToAbs = canvas => y => {\r\n\t\tconst dotHeight = canvas.height / 100\r\n\t\ty = y * dotHeight\r\n\t\treturn y\r\n\t}\r\n\r\n//отчистить холст\r\nconst clearCanvas = canvas => {\r\n\tconst ctx = canvas.getContext('2d')\r\n\tctx.clearRect(0, 0, canvas.width, canvas.height)\r\n}\r\n\r\n//рисуем фон\r\nconst drawBackground = (canvas, colors = {}) => {\r\n\tconst ctx = canvas.getContext('2d')\r\n\r\n\tctx.fillStyle = colors.backgroundColor\r\n\tctx.fillRect(0, 0, canvas.width, canvas.height)\r\n}\r\n\r\n//рисуем самолет\r\nconst drawPlane = (canvas, planeScale, progress, color) => {\r\n\tconst ctx = canvas.getContext('2d'),\r\n\t\th = hRelToAbs(canvas)\r\n\r\n\t//самолет настройки\r\n\tconst p1 = new Path2D(\r\n\t\t'M480 192H365.71L260.61 8.06A16.014 16.014 0 0 0 246.71 0h-65.5c-10.63 0-18.3 10.17-15.38 20.39L214.86 192H112l-43.2-57.6c-3.02-4.03-7.77-6.4-12.8-6.4H16.01C5.6 128-2.04 137.78.49 147.88L32 256 .49 364.12C-2.04 374.22 5.6 384 16.01 384H56c5.04 0 9.78-2.37 12.8-6.4L112 320h102.86l-49.03 171.6c-2.92 10.22 4.75 20.4 15.38 20.4h65.5c5.74 0 11.04-3.08 13.89-8.06L365.71 320H480c35.35 0 96-28.65 96-64s-60.65-64-96-64z'\r\n\t),\r\n\t\tp = new Path2D(),\r\n\t\tm = document\r\n\t\t\t.createElementNS('http://www.w3.org/2000/svg', 'svg')\r\n\t\t\t.createSVGMatrix(),\r\n\t\tt = m.scale(planeScale)\r\n\r\n\tp.addPath(p1, t)\r\n\r\n\tctx.save()\r\n\tctx.translate(progress, h(50) - (planeScale * C.planeHeight) / 2)\r\n\tctx.fillStyle = color\r\n\tctx.fill(p)\r\n\tctx.restore()\r\n}\r\n\r\n//рисуем огненный выхлап двигателя\r\nconst drawFireJet = (canvas, progress, colors, realPlaneHeight) => {\r\n\t//внешний\r\n\tlet ellipseHeightWidth = 1 / 2,\r\n\t\texEllipseHeight = 0.12 * realPlaneHeight,\r\n\t\texEllipseWidth = exEllipseHeight / ellipseHeightWidth\r\n\r\n\tlet gradient = createGradient(\r\n\t\tcanvas,\r\n\t\tcolors.plumeeExColors,\r\n\t\t-exEllipseWidth / 2,\r\n\t\texEllipseWidth / 2\r\n\t)\r\n\tdrawEllipse(canvas, progress, ellipseHeightWidth, exEllipseHeight, gradient)\r\n\r\n\t//внутрений\r\n\tellipseHeightWidth = 2 / 7\r\n\texEllipseHeight = 0.06 * realPlaneHeight\r\n\texEllipseWidth = exEllipseHeight / ellipseHeightWidth\r\n\r\n\tgradient = createGradient(\r\n\t\tcanvas,\r\n\t\tcolors.plumeeInColors,\r\n\t\t-exEllipseWidth / 2,\r\n\t\texEllipseWidth / 2\r\n\t)\r\n\tdrawEllipse(canvas, progress, ellipseHeightWidth, exEllipseHeight, gradient)\r\n}\r\n\r\n//рисуем элипс\r\nconst drawEllipse = (\r\n\tcanvas,\r\n\tprogress,\r\n\tellipseHeightWidth,\r\n\texEllipseHeight,\r\n\tcolor\r\n) => {\r\n\tconst ctx = canvas.getContext('2d'),\r\n\t\th = hRelToAbs(canvas)\r\n\r\n\tlet exEllipseWidth = exEllipseHeight / ellipseHeightWidth\r\n\r\n\tctx.save()\r\n\tctx.beginPath()\r\n\tctx.translate(progress - exEllipseWidth / 2, h(50) - exEllipseHeight / 10)\r\n\tctx.scale(1, ellipseHeightWidth)\r\n\tctx.arc(0, 0, exEllipseWidth, 0, Math.PI * 2, true)\r\n\tctx.fillStyle = color\r\n\tctx.closePath()\r\n\tctx.fill()\r\n\tctx.restore()\r\n}\r\n\r\n//создадим canvas gradient\r\nconst createGradient = (\r\n\tcanvas,\r\n\tstopColors = [],\r\n\tstartGradWidth = 0,\r\n\tstopGradWidth = 10\r\n) => {\r\n\tconst ctx = canvas.getContext('2d')\r\n\r\n\tlet gradient = ctx.createLinearGradient(startGradWidth, 0, stopGradWidth, 0)\r\n\tstopColors.forEach(stopLevel => {\r\n\t\tgradient.addColorStop(stopLevel.level, stopLevel.color)\r\n\t})\r\n\r\n\treturn gradient\r\n}\r\n\r\n//анимируем реактивный след\r\nconst animatExhaustCloud = (\r\n\tcanvas,\r\n\titems = [],\r\n\tflyFlag,\r\n\tprogress,\r\n\tspeedFlight,\r\n\tlengthExhaustCloud,\r\n\tcolors\r\n) => {\r\n\tconst h = hRelToAbs(canvas)\r\n\r\n\tlet itemInitX = progress,\r\n\t\titemInitY = h(50)\r\n\r\n\titems = createExhaustCloud(\r\n\t\tcanvas,\r\n\t\titems,\r\n\t\tflyFlag,\r\n\t\titemInitX,\r\n\t\titemInitY,\r\n\t\tspeedFlight,\r\n\t\tlengthExhaustCloud,\r\n\t\tcolors.cloudColor\r\n\t)\r\n\tdrawExhaustCloud(canvas, items)\r\n\r\n\treturn items\r\n}\r\n\r\n//рисуем реактивный след\r\nconst drawExhaustCloud = (canvas, items) => {\r\n\titems.forEach(item => {\r\n\t\tdrawExhaustItem(canvas, item)\r\n\t})\r\n}\r\n\r\n//создать реактивный след\r\nconst createExhaustCloud = (\r\n\tcanvas,\r\n\titems = [],\r\n\tflyFlag = true,\r\n\titemInitX,\r\n\titemInitY,\r\n\tspeedFlight,\r\n\tlengthExhaustCloud,\r\n\tcloudColor\r\n) => {\r\n\tconst h = hRelToAbs(canvas),\r\n\t\tvalItemOnItr = 1,\r\n\t\tmaxValItem = (60 * lengthExhaustCloud) / speedFlight,\r\n\t\tlengthItems = items.length,\r\n\t\tnextlengthItems = lengthItems + valItemOnItr,\r\n\t\trandom = rand(0, valItemOnItr * 10),\r\n\t\tdefaultSpeedX = flyFlag ? speedFlight : 0,\r\n\t\tdefaultSpeedY = h(15),\r\n\t\titemRadius = h(6)\r\n\tif (flyFlag)\r\n\t\tfor (let i = lengthItems; i <= nextlengthItems; i++) {\r\n\t\t\titems[i] = createExhaustItem(\r\n\t\t\t\t{\r\n\t\t\t\t\tx: itemInitX,\r\n\t\t\t\t\ty: itemInitY,\r\n\t\t\t\t\tradius: itemRadius,\r\n\t\t\t\t\tcolor: cloudColor\r\n\t\t\t\t},\r\n\t\t\t\tdefaultSpeedX,\r\n\t\t\t\t0\r\n\t\t\t)\r\n\t\t}\r\n\r\n\tif (nextlengthItems > maxValItem)\r\n\t\titems = items.slice(valItemOnItr + random, items.length)\r\n\tif (!flyFlag) items = items.slice(valItemOnItr * 2, items.length)\r\n\titems.map((item, index, array) => {\r\n\t\tlet percent = (index - valItemOnItr) / array.length,\r\n\t\t\tspeedY =\r\n\t\t\t\tindex >= array.length * 0.9 && flyFlag ? 0 : defaultSpeedY * percent\r\n\r\n\t\titem.color = addOpacityToColor(item.color, percent - 0.05)\r\n\t\treturn createExhaustItem(item, defaultSpeedX, speedY)\r\n\t})\r\n\r\n\treturn items\r\n}\r\n\r\n//создать еденицу реактивного следа\r\nconst createExhaustItem = (item = {}, speedX = 5, speedY = 1) => {\r\n\titem.x = item.x || 5\r\n\titem.y = item.y || 5\r\n\titem.radius = item.radius || 4\r\n\titem.color = item.color || '#999999'\r\n\tspeedX = speedX / 25\r\n\tspeedY = speedY / 100\r\n\r\n\titem.x += -speedX\r\n\titem.y += rand(-speedY - 1, speedY)\r\n\r\n\treturn item\r\n}\r\n//отрисовка еденицы реактивного следа\r\nconst drawExhaustItem = (canvas, item) => {\r\n\tconst ctx = canvas.getContext('2d')\r\n\r\n\tctx.beginPath()\r\n\tctx.arc(\r\n\t\titem.x,\r\n\t\titem.y,\r\n\t\titem.radius < 0 ? 0 : item.radius,\r\n\t\t0,\r\n\t\tMath.PI * 2,\r\n\t\tfalse\r\n\t)\r\n\tctx.fillStyle = item.color\r\n\tctx.fill()\r\n}\r\n\r\n//анимируем взлетнопосадочную полосу\r\nconst animatRunway = (canvas, progress, runWayK, colors = {}, runwayType) => {\r\n\tconst w = wRelToAbs(canvas),\r\n\t\trealPlaneWidth = canvas.height * 0.9 * 1.2,\r\n\t\tk0 = progress + realPlaneWidth - w(100 - runWayK),\r\n\t\tk1 = k0 / w(runWayK),\r\n\t\toffset =\r\n\t\t\tprogress < w(runWayK)\r\n\t\t\t\t? (-w(100) * progress) / w(runWayK)\r\n\t\t\t\t: progress + realPlaneWidth - 1 > w(100 - runWayK)\r\n\t\t\t\t\t? w(100) * (1 - k1)\r\n\t\t\t\t\t: w(100)\r\n\r\n\tif (!(offset > w(100) || offset < -w(100)))\r\n\t\tdrawRunway(canvas, offset, colors.runwayColor, runwayType)\r\n}\r\n\r\n//рисуем взлетнопосадочную полосу\r\nconst drawRunway = (canvas, offset, color, runwayType) => {\r\n\tconst ctx = canvas.getContext('2d'),\r\n\t\tw = wRelToAbs(canvas),\r\n\t\th = hRelToAbs(canvas),\r\n\t\trunwayWidth = h(5),\r\n\t\trwDachSpac = w(3) > 7 ? w(5) : 7\r\n\tswitch (runwayType) {\r\n\t\tcase 0:\r\n\t\t\tctx.save()\r\n\t\t\tctx.translate(offset, 0)\r\n\t\t\tctx.lineWidth = runwayWidth\r\n\t\t\tctx.strokeStyle = color\r\n\t\t\tctx.setLineDash([\r\n\t\t\t\trwDachSpac,\r\n\t\t\t\trwDachSpac\r\n\t\t\t]) /*dashes are 5px and spaces are 3px*/\r\n\t\t\tctx.beginPath()\r\n\t\t\tctx.moveTo(0, h(50))\r\n\t\t\tctx.lineTo(w(100), h(50))\r\n\t\t\tctx.stroke()\r\n\t\t\tctx.restore()\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\tcase 1:\r\n\t\t\tctx.save()\r\n\t\t\tctx.translate(offset, 0)\r\n\t\t\tctx.lineWidth = runwayWidth\r\n\t\t\tctx.strokeStyle = color\r\n\t\t\tctx.setLineDash([\r\n\t\t\t\trwDachSpac,\r\n\t\t\t\trwDachSpac\r\n\t\t\t]) /*dashes are 5px and spaces are 3px*/\r\n\t\t\tctx.beginPath()\r\n\t\t\tctx.moveTo(0, h(30))\r\n\t\t\tctx.lineTo(w(100), h(30))\r\n\t\t\tctx.moveTo(0, h(70))\r\n\t\t\tctx.lineTo(w(100), h(70))\r\n\t\t\tctx.stroke()\r\n\t\t\tctx.restore()\r\n\t\t\tbreak\r\n\t}\r\n}\r\n\r\n//рандомное число\r\nconst rand = (a, b) => {\r\n\treturn ~~(Math.random() * (b - a + 1) + a)\r\n}\r\n\r\n//добавить прозрачность к цвету в формате HEX\r\nconst addOpacityToColor = (color = '', percent = 1) => {\r\n\tpercent = percent < 0 ? 0 : percent\r\n\tlet stringOpacity = Math.round(percent * 255).toString(16)\r\n\tstringOpacity =\r\n\t\t'' + stringOpacity.length > 1 ? stringOpacity : '0' + stringOpacity\r\n\tcolor = color.substring(0, 7) + stringOpacity\r\n\r\n\treturn color\r\n}\r\n\r\nconst getProgress = (canvas, progress, workType) => {\r\n\tconst realPlaneHeight = canvas.height * 0.9,\r\n\t\trealPlaneWidth = realPlaneHeight * 1.2\r\n\tswitch (workType) {\r\n\t\tcase C.wtFlyFromAToB:\r\n\t\t\tbreak\r\n\t\tcase C.wtForeverFlyFromA:\r\n\t\t\tbreak\r\n\t\tcase C.wtForeverFly:\r\n\t\tdefault:\r\n\t\t\tprogress = canvas.width * 0.99 - realPlaneWidth\r\n\t\t\tbreak\r\n\t}\r\n\treturn progress\r\n}\r\n\r\nconst getDotEndFly = (canvas, workType, realPlaneWidth) => {\r\n\tlet dotEndFly\r\n\r\n\tswitch (workType) {\r\n\t\tcase C.wtFlyFromAToB:\r\n\t\t\tdotEndFly = canvas.width - realPlaneWidth\r\n\t\t\tbreak\r\n\t\tcase C.wtForeverFlyFromA:\r\n\t\t\tdotEndFly = canvas.width * 0.66 - realPlaneWidth\r\n\t\t\tbreak\r\n\t\tcase C.wtForeverFly:\r\n\t\tdefault:\r\n\t\t\tdotEndFly = canvas.width * 0.99 - realPlaneWidth\r\n\t\t\tbreak\r\n\t}\r\n\r\n\treturn dotEndFly\r\n}\r\n\r\nconst getPlaneScale = (\r\n\tcanvas,\r\n\tprogress,\r\n\tapexDot1,\r\n\tapexDot2,\r\n\tplaneScaleOnGroundKof\r\n) => {\r\n\t//самолет настройки\r\n\tconst w = wRelToAbs(canvas),\r\n\t\trealPlaneWidth = canvas.height * 0.9 * 1.2,\r\n\t\tdefaultPlaneScale = (canvas.height / C.planeHeight) * 0.9, //коэфицент увеличение самолета по умолнию (в полете)\r\n\t\tplaneScaleOnGround = defaultPlaneScale * planeScaleOnGroundKof\r\n\r\n\tlet planeOnGroundFlag =\r\n\t\tprogress < w(C.plnOnGndTime) ||\r\n\t\tprogress + realPlaneWidth > w(100 - C.plnOnGndTime),\r\n\t\tplaneOnUpFlag = progress < w(apexDot1),\r\n\t\tplaneOnDownFlag = progress + realPlaneWidth > w(100 - apexDot2),\r\n\t\tkefOnUp =\r\n\t\t\tplaneScaleOnGround +\r\n\t\t\t((defaultPlaneScale - planeScaleOnGround) *\r\n\t\t\t\t(progress - w(C.plnOnGndTime))) /\r\n\t\t\tw(apexDot1 - C.plnOnGndTime),\r\n\t\tkefUnDown =\r\n\t\t\tdefaultPlaneScale -\r\n\t\t\t((defaultPlaneScale - planeScaleOnGround) *\r\n\t\t\t\t(progress + realPlaneWidth - w(100 - apexDot2))) /\r\n\t\t\tw(apexDot2 - C.plnOnGndTime),\r\n\t\tplaneScale = planeOnGroundFlag\r\n\t\t\t? planeScaleOnGround\r\n\t\t\t: planeOnUpFlag\r\n\t\t\t\t? kefOnUp\r\n\t\t\t\t: planeOnDownFlag\r\n\t\t\t\t\t? kefUnDown\r\n\t\t\t\t\t: defaultPlaneScale\r\n\r\n\treturn { planeScale }\r\n}\r\n//константы\r\nconst C = {\r\n\twtForeverFly: 10,\r\n\twtForeverFlyFromA: 11,\r\n\twtFlyFromAToB: 20,\r\n\tplaneHeight: 512, //высота самолета по дефолту (в path)\r\n\tplnOnGndTime: 3 //процент от общей длины, когда самолет 'на земле' при взлете и посадке\r\n}\r\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"../../assets/styles/Ticket.scss\";\nimport CurrencySymbol from \"./CurrencySymbol\";\nimport pluralize from \"pluralize-ru\";\nimport Moment from \"react-moment\";\nimport \"moment/locale/ru\";\nimport logo from \"../../assets/images/turkish-airlines-logo.svg\";\nimport dddCapitalize from \"../../helpers/dddCapitalize\";\nimport CanvasAirplane from \"../CanvasAirplane\";\n\nconst Ticket = ({\n\tmixin,\n\tprice,\n\tcurrency,\n\tcurrencies,\n\tdeparture_time,\n\tarrival_time,\n\tstops,\n\torigin,\n\torigin_name,\n\tdestination,\n\tdestination_name,\n\tarrival_date,\n\tdeparture_date,\n}) => {\n\tconst { rates } = currencies;\n\tconst stopsText = isFinite(stops)\n\t\t? pluralize(stops, \"\", \"%d остановка\", \"%d остановки\", \"%d остановок\")\n\t\t: \"\";\n\n\tlet adaptedPrice = 0;\n\n\t/*\n\t * We need this adapter-crutch, since the LogoExchangeratesapi.io\n\t * free plan does not imply theability to specify the base currency,\n\t * in our case it is the ruble\n\t */\n\tif (currency === \"RUB\") adaptedPrice = price;\n\telse if (currency === \"EUR\")\n\t\tadaptedPrice = price / (rates[\"RUB\"] ? rates[\"RUB\"] : 1);\n\telse\n\t\tadaptedPrice =\n\t\t\t(price / (rates[\"RUB\"] ? rates[\"RUB\"] : 1)) * rates[currency];\n\n\tadaptedPrice = adaptedPrice.toFixed(2);\n\t/********/\n\n\treturn (\n\t\t<div className={mixin ? `${mixin} ticket` : `ticket`}>\n\t\t\t<div className='ticket__col ticket__col--action'>\n\t\t\t\t<div className='ticket__media'>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={logo}\n\t\t\t\t\t\tclassName='ticket__media-img'\n\t\t\t\t\t\twidth='120'\n\t\t\t\t\t\theight='35'\n\t\t\t\t\t\talt='Ticket logo'\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<button type='button' className='ticket__buy'>\n\t\t\t\t\t<div className='ticket__buy-text'>Купить</div>\n\t\t\t\t\t<div className='ticket__price'>\n\t\t\t\t\t\t<div className='ticket__price-inner'>\n\t\t\t\t\t\t\t<div className='ticket__price-currency'>\n\t\t\t\t\t\t\t\t<CurrencySymbol currency={currency} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='ticket__price-value'>за {adaptedPrice}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div className='ticket__col ticket__col--content'>\n\t\t\t\t<div className='ticket__media'>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={logo}\n\t\t\t\t\t\tclassName='ticket__media-img'\n\t\t\t\t\t\twidth='120'\n\t\t\t\t\t\theight='35'\n\t\t\t\t\t\talt='Ticket logo'\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className='ticket__segment'>\n\t\t\t\t\t<div className='ticket__route ticket__route--head'>\n\t\t\t\t\t\t<div className='ticket__origin'>\n\t\t\t\t\t\t\t<div className='ticket__time'>{departure_time}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='ticket__path'>\n\t\t\t\t\t\t\t<div className='ticket__path-stops'>{stopsText}</div>\n\t\t\t\t\t\t\t<div className='ticket__path-canvas'>\n\t\t\t\t\t\t\t\t<CanvasAirplane planeScaleOnGroundKof={1} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='ticket__destination'>\n\t\t\t\t\t\t\t<div className='ticket__time'>{arrival_time}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='ticket__route ticket__route--body'>\n\t\t\t\t\t\t<div className='ticket__origin'>\n\t\t\t\t\t\t\t<div className='ticket__location'>\n\t\t\t\t\t\t\t\t{origin}, {origin_name}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='ticket__date'>\n\t\t\t\t\t\t\t\t<Moment\n\t\t\t\t\t\t\t\t\tparse='DD.MM.YY'\n\t\t\t\t\t\t\t\t\tformat='D MMM YYYY, ddd'\n\t\t\t\t\t\t\t\t\tlocale='ru'\n\t\t\t\t\t\t\t\t\tfilter={dddCapitalize}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{departure_date}\n\t\t\t\t\t\t\t\t</Moment>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='ticket__destination'>\n\t\t\t\t\t\t\t<div className='ticket__location'>\n\t\t\t\t\t\t\t\t{destination_name}, {destination}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='ticket__date' /*align='right'*/>\n\t\t\t\t\t\t\t\t<Moment\n\t\t\t\t\t\t\t\t\tparse='DD.MM.YY'\n\t\t\t\t\t\t\t\t\tformat='D MMM YYYY, ddd'\n\t\t\t\t\t\t\t\t\tlocale='ru'\n\t\t\t\t\t\t\t\t\tfilter={dddCapitalize}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{arrival_date}\n\t\t\t\t\t\t\t\t</Moment>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nTicket.propTypes = {\n\tmixin: PropTypes.string,\n\tprice: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\tcurrency: PropTypes.string,\n\tcurrencies: PropTypes.object,\n\tdeparture_time: PropTypes.string,\n\tarrival_time: PropTypes.string,\n\tstops: PropTypes.number,\n\torigin: PropTypes.string,\n\torigin_name: PropTypes.string,\n\tdestination: PropTypes.string,\n\tdestination_name: PropTypes.string,\n\tarrival_date: PropTypes.string,\n\tdeparture_date: PropTypes.string,\n};\n\nTicket.defaultProps = {\n\tmixin: \"\",\n\tprice: 0,\n\tcurrency: \"RUB\",\n\tcurrencies: { RUB: 1 },\n\tdeparture_time: \"\",\n\tarrival_time: \"\",\n\tstops: 0,\n\torigin: \"\",\n\torigin_name: \"\",\n\tdestination: \"\",\n\tdestination_name: \"\",\n\tarrival_date: \"\",\n\tdeparture_date: \"\",\n};\n\nexport default Ticket;\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport '../../assets/styles/TicketsList.scss'\nimport Ticket from '../UI/Ticket'\nimport Loader from '../UI/Loader'\n\nconst TicketsList = ({\n\t\tmixin,\n\t\tcurrencies,\n\t\tfilters,\n\t\tmodificators,\n\t\ttickets,\n\t\tdimensions\n\t}) => {\n\tconst { list } = tickets\n\tconst { fetching } = tickets.fetch\n\tconst { error } = tickets.fetch\n\tconst { currency } = modificators.currencies\n\tconst { stops } = filters\n\treturn (\n\t\t<div className={mixin ? `tickets-list ${mixin}` : 'tickets-list'}>\n\t\t\t{\n\t\t\t\terror\n\t\t\t\t\t? <span>Fetch data error!</span>\n\t\t\t\t\t: fetching\n\t\t\t\t\t\t? <Loader>Loading</Loader>\n\t\t\t\t\t\t: list\n\t\t\t\t\t\t\t? list\n\t\t\t\t\t\t\t\t.filter(ticket => stops.indexOf(ticket.stops) !== -1)\n\t\t\t\t\t\t\t\t.sort((a, b) => a.price - b.price)\n\t\t\t\t\t\t\t\t.map((ticket, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Ticket\n\t\t\t\t\t\t\t\t\t\t{...ticket}\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\tmixin='App__ticket'\n\t\t\t\t\t\t\t\t\t\tcurrency={currency}\n\t\t\t\t\t\t\t\t\t\tcurrencies={currencies}\n\t\t\t\t\t\t\t\t\t\tdimensions={dimensions} />\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t: null\n\t\t\t}\n\t\t</div>\n\t)\n}\n\nTicketsList.defaultProps = {\n\tmixin: '',\n\tcurrencies: {},\n\tfilters: {},\n\tmodificators: {},\n\ttickets: {},\n\tdimensions: {}\n}\n\nTicketsList.propTypes = {\n\tmixin: PropTypes.string,\n\tcurrencies: PropTypes.object,\n\tfilters: PropTypes.object,\n\tmodificators: PropTypes.object,\n\ttickets: PropTypes.object,\n\tdimensions: PropTypes.object\n}\n\nexport default TicketsList\n","const constants = {\n\tFETCH_TICKETS_START: 'FETCH_TICKETS_START',\n\tFETCH_TICKETS_SUCCESS: 'FETCH_TICKETS_SUCCESS',\n\tFETCH_TICKETS_ERROR: 'FETCH_TICKETS_ERROR',\n\n\tSET_TICKETS: 'SET_TICKETS',\n\n\tFILTER_BY_DEFAULT_STOPS: 'FILTER_BY_DEFAULT_STOPS',\n\tFILTER_BY_STOPS: 'FILTER_BY_STOPS',\n\tFILTER_BY_ONLY_STOPS: 'FILTER_BY_ONLY_STOPS',\n\tFILTER_BY_ALL_STOPS: 'FILTER_BY_ALL_STOPS',\n\n\tFETCH_CURRENCY_START: 'FETCH_CURRENCY_START',\n\tFETCH_CURRENCY_SUCCESS: 'FETCH_CURRENCY_SUCCESS',\n\tFETCH_CURRENCY_ERROR: 'FETCH_CURRENCY_ERROR',\n\n\tSET_DEFAULT_CURRENCY: 'SET_DEFAULT_CURRENCY',\n\tSET_BASE_CURRENCY: 'SET_BASE_CURRENCY',\n\tSET_CURRENCY_RATES: 'SET_CURRENCY_RATES',\n\n\tSET_CURRENCY_MODIFIERS: 'SET_CURRENCY_MODIFIERS',\n\tSET_CURRENCY_MODIFIER: 'SET_CURRENCY_MODIFIER',\n\tADD_CURRENCY_MODIFIER: 'ADD_CURRENCY_MODIFIER',\n\tREMOVE_CURRENCY_MODIFIER: 'REMOVE_CURRENCY_MODIFIER',\n\n\tSET_SCROLL_DIAMENTIONS: 'SET_SCROLL_DIAMENTIONS'\n}\n\nexport default constants\n","import C from './constants'\n\n// Tickets\n\nexport const fetchTicketsStart = () =>   ({ type: C.FETCH_TICKETS_START })\nexport const fetchTicketsSuccess = () => ({ type: C.FETCH_TICKETS_SUCCESS })\nexport const fetchTicketsError = () =>   ({ type: C.FETCH_TICKETS_ERROR })\n\nexport const setTickets = tickets => ({\n\ttype: C.SET_TICKETS,\n\ttickets\n})\n\n// Filters\n\nexport const filterByStops = (stops, checked) => ({\n\ttype: C.FILTER_BY_STOPS,\n\tstops,\n\tchecked\n})\n\nexport const filterByOnlyStops = (stops) => ({\n\ttype: C.FILTER_BY_ONLY_STOPS,\n\tstops\n})\n\nexport const filterByDefaultStops = () => ({\n\ttype: C.FILTER_BY_DEFAULT_STOPS\n})\n\nexport const filterByAllStops = (stops, checked) => ({\n\ttype: C.FILTER_BY_ALL_STOPS,\n\tstops,\n\tchecked\n})\n\n// Currencies\n\nexport const fetchCurrencyStart = () =>   ({ type: C.FETCH_CURRENCY_START })\nexport const fetchCurrencySuccess = () => ({ type: C.FETCH_CURRENCY_SUCCESS })\nexport const fetchCurrencyError = () =>   ({ type: C.FETCH_CURRENCY_ERROR })\n\nexport const setCurrencyRates = (rates) => ({\n\ttype: C.SET_CURRENCY_RATES,\n\trates\n})\n\nexport const setDefaultCurrency = () => ({\n\ttype: C.SET_DEFAULT_CURRENCY\n})\n\nexport const setbaseCurrency = base => ({\n\ttype: C.SET_BASE_CURRENCY,\n\tbase\n})\n\nexport const addCurrencyModifier = currency => ({\n\ttype: C.ADD_CURRENCY_MODIFIER,\n\tcurrency\n})\n\nexport const removeCurrencyModifiers = currency => ({\n\ttype: C.REMOVE_CURRENCY_MODIFIER,\n\tcurrency\n})\n\nexport const setCurrencyModifiers = currencies => ({\n\ttype: C.SET_CURRENCY_MODIFIERS,\n\tcurrencies\n})\n\nexport const setCurrencyModifier = currency => ({\n\ttype: C.SET_CURRENCY_MODIFIER,\n\tcurrency\n})\n\nexport const setScrollDimensions = dimensions => ({\n\ttype: C.SET_SCROLL_DIAMENTIONS,\n\tdimensions\n})\n","import { connect } from 'react-redux'\nimport StopList from '../components/UI/StopList'\nimport ButtonsGroup from './UI/ButtonsGroup'\nimport TicketsList from './UI/TicketsList'\nimport {\n\tfilterByStops,\n\tfilterByOnlyStops,\n\tfilterByAllStops,\n\tsetCurrencyModifier } from '../store/actions'\n\nexport const Stops = connect(\n\tstate =>\n\t\t({\n\t\t\tfilters: state.filters.stops,\n\t\t\tstops: state.tickets.stops,\n\t\t\tfetching: state.tickets.fetch.fetching\n\t\t}),\n\tdispatch =>\n\t\t({\n\t\t\tonStop(event) {\n\t\t\t\tconst { target } = event\n\t\t\t\tconst value = Number(target.value)\n\t\t\t\tconst { checked } = target\n\t\t\t\tdispatch(filterByStops(value, checked))\n\t\t\t},\n\t\t\tonOnly(event) {\n\t\t\t\tconst { target } = event\n\t\t\t\tconst { dataset } = target\n\t\t\t\tconst stops = Number(dataset.stops)\n\t\t\t\tdispatch(filterByOnlyStops(stops))\n\t\t\t},\n\t\t\tonAllStops(event) {\n\t\t\t\tconst { target } = event\n\t\t\t\tconst { checked } = target\n\t\t\t\tconst { stops } = window.store.getState().tickets\n\t\t\t\tdispatch(filterByAllStops(stops, checked))\n\t\t\t}\n\t\t})\n)(StopList)\n\nconst hasRateData = (rates = {}, currency) =>\n\tObject.keys(rates).some((rate, index, array) =>\n\t\tarray.indexOf(currency) !== -1\n\t)\n\nexport const Currencies = connect(\n\tstate => {\n\t\tconst { list } = state.modificators.currencies\n\t\tconst buttons = list.map(currency => {\n\t\t\tconst text = currency\n\t\t\tconst isBase = currency === state.currencies.base\n\t\t\tconst defaultChecked = currency === state.modificators.currencies.currency\n\t\t\tconst disabled = isBase\n\t\t\t\t? false\n\t\t\t\t: (\n\t\t\t\t\tstate.currencies.fetch.fetching ||\n\t\t\t\t\tstate.currencies.fetch.error ||\n\t\t\t\t\t!hasRateData(state.currencies.rates, currency)\n\t\t\t\t)\n\t\t\t\t\t? true\n\t\t\t\t\t: false\n\t\t\treturn ({\n\t\t\t\ttext,\n\t\t\t\tdefaultChecked,\n\t\t\t\tdisabled\n\t\t\t})\n\t\t})\n\t\treturn ({\n\t\t\tbuttons,\n\t\t\tfetching: state.currencies.fetch.fetching\n\t\t})\n\t},\n\tdispatch => ({\n\t\tonCheck(event) {\n\t\t\tconst { target } = event\n\t\t\tconst { value } = target\n\t\t\tdispatch(setCurrencyModifier(value))\n\t\t}\n\t})\n)(ButtonsGroup)\n\nexport const TicketsListContainer = connect(\n\tstate => ({\n\t\tcurrencies: state.currencies,\n\t\tfilters: state.filters,\n\t\tmodificators: state.modificators,\n\t\ttickets: state.tickets,\n\t\tdimensions: state.dimensions\n\t}),\n\tnull\n)(TicketsList)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport '../../assets/styles/Tickets.scss'\nimport Filter from './Filter'\nimport Modificator from './Modificator'\nimport { Stops, Currencies, TicketsListContainer } from '../containers'\n\nconst Tickets = ({ mixin }) =>\n\t<div className={mixin ? `${mixin} tickets` : `tickets`}>\n\t\t<aside className='aside tickets__aside'>\n\t\t\t<div className='aside__item'>\n\t\t\t\t<Modificator>\n\t\t\t\t\t<Currencies\n\t\t\t\t\t\tname='currency-radio-group'\n\t\t\t\t\t\ttitle='ВАЛЮТА' />\n\t\t\t\t</Modificator>\n\t\t\t</div>\n\t\t\t<div className='aside__item aside__item--no-padding'>\n\t\t\t\t<Filter>\n\t\t\t\t\t<Stops\n\t\t\t\t\t\tmixin='filter__stop-list'\n\t\t\t\t\t\ttitle='КОЛИЧЕСТВО ПЕРЕСАДОК' />\n\t\t\t\t</Filter>\n\t\t\t</div>\n\t\t</aside>\n\t\t<main className='tickets__main'>\n\t\t\t<TicketsListContainer mixin='tickets__list' />\n\t\t</main>\n\t</div>\n\nTickets.defaultProps = {\n\tmixin: ''\n}\n\nTickets.propTypes = {\n\tmixin: PropTypes.string\n}\n\nexport default Tickets\n","import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { Helmet } from \"react-helmet\";\nimport ScrollbarSize from \"react-scrollbar-size\";\nimport \"../assets/styles/App.scss\";\nimport Header from \"./UI/Header\";\nimport logo from \"../assets/images/logo.png\";\nimport Tickets from \"./UI/Tickets\";\nimport { fetchTickets, fetchCurrency } from \"../helpers/fetch\";\nimport { setScrollDimensions } from \"../store/actions\";\n\nclass App extends PureComponent {\n\tcomponentDidMount() {\n\t\tconst storage = localStorage[\"aviasales-store\"];\n\n\t\tif (!storage || !JSON.parse(storage).tickets.fetch.fetched)\n\t\t\tthis.props.fetchTickets(\"./tickets.json\");\n\n\t\tif (!storage || !JSON.parse(storage).currencies.fetch.fetched)\n\t\t\tthis.props.fetchCurrency(\n\t\t\t\t// \"https://api.exchangeratesapi.io/v1/latest?access_key=b24955df857d615830fa8b0bbacf58f8&format=1\",\n\t\t\t\t\"./exchange-rates-fallback.json\",\n\t\t\t);\n\n\t\t/*\n\t\t * We can specify the base symbol as well as the exact list\n\t\t * of symbols - at the Basic Payment Plan,\n\t\t * currently we are using Free Payment Plan\n\t\t */\n\t\t// this.props.fetchCurrency('http://api.exchangeratesapi.io/v1/latest?access_key=b24955df857d615830fa8b0bbacf58f8&base=RUB&symbols=RUB,USD,EUR&format=1')\n\n\t\t/*\n\t\t---------------------\n\t\tExample of an answer:\n\t\t---------------------\n\t\t{\n\t\t\t\"success\":true,\n\t\t\t\"timestamp\":1637589243,\n\t\t\t\"base\":\"EUR\",\n\t\t\t\"date\":\"2021-11-22\",\n\t\t\t\"rates\":{\n\t\t\t\t\"USD\":1.127548,\n\t\t\t\t\"AUD\":1.551387,\n\t\t\t\t\"CAD\":1.425317,\n\t\t\t\t\"PLN\":4.691678,\n\t\t\t\t\"MXN\":23.548957\n\t\t\t}\n\t\t}\n\t\t*/\n\t}\n\trender() {\n\t\tconst { scrollbarWidth } = this.props.dimensions.scroll;\n\t\treturn (\n\t\t\t<div className='App root__App'>\n\t\t\t\t<Helmet>\n\t\t\t\t\t<html lang='ru' />\n\t\t\t\t\t<title>Aviasales</title>\n\t\t\t\t\t<style>\n\t\t\t\t\t\t{`\n\t\t\t\t\t\t\t:root {\n\t\t\t\t\t\t\t\t--scroll-width: ${scrollbarWidth}px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`}\n\t\t\t\t\t</style>\n\t\t\t\t</Helmet>\n\t\t\t\t<ScrollbarSize\n\t\t\t\t\tonLoad={this.props.scrollbarSizeLoad}\n\t\t\t\t\tonChange={this.props.scrollbarSizeChange}\n\t\t\t\t/>\n\n\t\t\t\t<div className='container App__container'>\n\t\t\t\t\t<Header logo={logo} mixin='App__header' />\n\t\t\t\t\t<Tickets mixin='App__tickets' />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nApp.defaultProps = {\n\tdimensions: {\n\t\tscroll: {\n\t\t\tscrollbarHeight: 0,\n\t\t\tscrollbarWidth: 0,\n\t\t},\n\t\twindow: {\n\t\t\tinnerWidth: 0,\n\t\t},\n\t},\n\tfetchCurrency: (f) => f,\n\tfetchTickets: (f) => f,\n\tscrollbarSizeLoad: (f) => f,\n\tscrollbarSizeChange: (f) => f,\n};\n\nApp.propTypes = {\n\tdimensions: PropTypes.object,\n\tfetchCurrency: PropTypes.func,\n\tfetchTickets: PropTypes.func,\n\tscrollbarSizeLoad: PropTypes.func,\n\tscrollbarSizeChange: PropTypes.func,\n};\n\nexport default connect(\n\t(state) => ({\n\t\tdimensions: state.dimensions,\n\t}),\n\t{\n\t\tfetchCurrency,\n\t\tfetchTickets,\n\t\tscrollbarSizeLoad: (dimensions) => (dispatch) =>\n\t\t\tdispatch(setScrollDimensions(dimensions)),\n\t\tscrollbarSizeChange: (dimensions) => (dispatch) =>\n\t\t\tdispatch(setScrollDimensions(dimensions)),\n\t},\n)(App);\n","import { compose } from 'redux'\nimport { sortArrayByNumeric } from '../helpers/sort'\n\nconst getUnsortedStops = tickets => {\n\tconst _stops = tickets.reduce((reduced, ticket) => {\n\t\tconst { stops } = ticket\n\t\treturn (reduced.indexOf(stops) === -1) ?\n\t\t\t[...reduced, stops] :\n\t\t\treduced\n\t}, [])\n\n\treturn _stops\n}\n\nconst sortArrayByNumericWrapper = direction => array => sortArrayByNumeric(array, direction)\n\nconst getStopsFromTickets = compose(\n\tsortArrayByNumericWrapper('ascending'),\n\tgetUnsortedStops\n)\n\nexport default getStopsFromTickets\n","import {\n\tfetchTicketsStart,\n\tfetchTicketsSuccess,\n\tfetchTicketsError,\n\tfetchCurrencyStart,\n\tfetchCurrencySuccess,\n\tfetchCurrencyError,\n\tsetCurrencyRates,\n\tsetTickets,\n} from \"../store/actions\";\n\nexport const fetchTickets = (url) => (dispatch) => {\n\tdispatch(fetchTicketsStart());\n\tfetch(url)\n\t\t.then((response) => response.json())\n\t\t.then((tickets) => {\n\t\t\tdispatch(fetchTicketsSuccess());\n\t\t\tdispatch(setTickets(tickets));\n\t\t})\n\t\t.catch(() => dispatch(fetchTicketsError()));\n};\n\nexport const fetchCurrency = (url) => (dispatch) => {\n\tdispatch(fetchCurrencyStart());\n\tfetch(url)\n\t\t.then((response) => response.json())\n\t\t.then((response) => {\n\t\t\tconst { rates } = response;\n\t\t\tdispatch(fetchCurrencySuccess());\n\t\t\tdispatch(setCurrencyRates(rates));\n\t\t})\n\t\t.catch(() => dispatch(fetchCurrencyError()));\n};\n","export const sortArrayByNumeric = (array, direction) => {\n\tswitch(direction) {\n\t\tcase 'ascending':\n\t\t\treturn [...array].sort((a, b) => a - b)\n\n\t\tcase 'descending':\n\t\t\treturn [...array].sort((a, b) => b - a)\n\n\t\tdefault:\n\t\t\treturn array\n\t}\n}\n","import C from './constants'\nimport { compose } from 'redux'\nimport { sortArrayByNumeric } from '../helpers/sort'\nimport getStopsFromTickets from '../helpers/getStops'\nimport {\n\tdafaultFetchState,\n\tstartFetchState,\n\tsuccessFetchState,\n\terrorFetchState } from '../helpers/fetchStates'\n\nexport const fetch = (action = {}, state = dafaultFetchState()) => {\n\tswitch (action.type) {\n\t\tcase C.FETCH_TICKETS_START:    return startFetchState()\n\t\tcase C.FETCH_TICKETS_SUCCESS:  return successFetchState()\n\t\tcase C.FETCH_TICKETS_ERROR:    return errorFetchState()\n\n\t\tcase C.FETCH_CURRENCY_START:   return startFetchState()\n\t\tcase C.FETCH_CURRENCY_SUCCESS: return successFetchState()\n\t\tcase C.FETCH_CURRENCY_ERROR:   return errorFetchState()\n\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const tickets = (state = { list: [], stops: [], fetch: fetch() }, action = {}) => {\n\tswitch (action.type) {\n\t\tcase C.FETCH_TICKETS_START:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfetch: fetch(action)\n\t\t\t}\n\n\t\tcase C.FETCH_TICKETS_SUCCESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfetch: fetch(action)\n\t\t\t}\n\n\t\tcase C.FETCH_TICKETS_ERROR:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfetch: fetch(action)\n\t\t\t}\n\n\t\tcase C.SET_TICKETS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlist: action.tickets,\n\t\t\t\tstops: getStopsFromTickets(action.tickets)\n\t\t\t}\n\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const stopsFilter = (action = {}, state = []) => {\n\tlet { stops } = action\n\tstops = Array.isArray(stops)\n\t\t? stops\n\t\t: [ stops ]\n\n\tswitch (action.type) {\n\t\tcase C.FILTER_BY_STOPS: {\n\t\t\tconst { checked } = action\n\t\t\treturn [...stops].reduce((reduced, stop) => {\n\t\t\t\treturn (checked && (reduced.indexOf(stop) === -1))\n\t\t\t\t\t? [...reduced, stop]\n\t\t\t\t\t: reduced.filter(_stop => _stop !== stop)\n\t\t\t\t\t\n\t\t\t}, state)\n\t\t}\n\n\t\tcase C.FILTER_BY_DEFAULT_STOPS:\n\t\t\treturn [0,1,2]\n\n\t\tcase C.FILTER_BY_ONLY_STOPS:\n\t\t\treturn stops\n\n\t\tcase C.FILTER_BY_ALL_STOPS: {\n\t\t\tconst { checked } = action\n\t\t\treturn checked\n\t\t\t\t? stops\n\t\t\t\t: []\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nconst sortArrayByNumericWrapper = direction => array => sortArrayByNumeric(array, direction)\n\nconst stopsFilterWithSort = compose(\n\tsortArrayByNumericWrapper('ascending'),\n\tstopsFilter\n)\n\nexport const filters = (state = {}, action = {}) => {\n\tswitch (action.type) {\n\t\tcase C.FILTER_BY_STOPS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstops: stopsFilterWithSort(action, state.stops)\n\t\t\t}\n\n\t\tcase C.FILTER_BY_DEFAULT_STOPS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstops: stopsFilter(action)\n\t\t\t}\n\n\t\tcase C.FILTER_BY_ONLY_STOPS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstops: stopsFilter(action, state.stops)\n\t\t\t}\n\n\t\tcase C.FILTER_BY_ALL_STOPS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstops: stopsFilterWithSort(action)\n\t\t\t}\n\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const baseСurrency = (action = {}, state = 'RUB') => {\n\tswitch (action.type) {\n\t\tcase C.SET_DEFAULT_CURRENCY:\n\t\t\treturn 'RUB'\n\n\t\tcase C.SET_BASE_CURRENCY:\n\t\t\treturn action.base\n\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const currencyRates = (action = {}, state = {}) => {\n\tswitch (action.type) {\n\t\tcase C.SET_CURRENCY_RATES:\n\t\t\treturn action.rates\n\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const currencies = (state = { rates: currencyRates(), base: baseСurrency(), fetch: fetch() }, action = {}) => {\n\tswitch (action.type) {\n\t\tcase C.FETCH_CURRENCY_START:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfetch: fetch(action)\n\t\t\t}\n\n\t\tcase C.FETCH_CURRENCY_SUCCESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfetch: fetch(action)\n\t\t\t}\n\n\t\tcase C.FETCH_CURRENCY_ERROR:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfetch: fetch(action)\n\t\t\t}\n\n\t\tcase C.SET_DEFAULT_CURRENCY:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tbase: baseСurrency(action)\n\t\t\t}\n\n\t\tcase C.SET_BASE_CURRENCY:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tbase: baseСurrency(action)\n\t\t\t}\n\n\t\tcase C.SET_CURRENCY_RATES:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trates: currencyRates(action)\n\t\t\t}\n\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const currencyModifier = (action = {}, state = baseСurrency()) => {\n\tswitch (action.type) {\n\t\tcase C.SET_CURRENCY_MODIFIER:\n\t\t\treturn action.currency\n\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const currencyModifiersList = (action = {}, state = [baseСurrency()]) => {\n\tswitch (action.type) {\n\t\tcase C.SET_CURRENCY_MODIFIERS:\n\t\t\treturn action.currencies\n\n\t\tcase C.ADD_CURRENCY_MODIFIER:\n\t\t\treturn [...state, action.currency]\n\n\t\tcase C.REMOVE_CURRENCY_MODIFIER:\n\t\t\treturn [...state].filter(currency => currency !== action.currency)\n\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const currencyModifiers = (action = {}, state = {list: currencyModifiersList(), currency: currencyModifier()}) => {\n\tswitch (action.type) {\n\t\tcase C.SET_CURRENCY_MODIFIERS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlist: currencyModifiersList(action, state.list)\n\t\t\t}\n\n\t\tcase C.ADD_CURRENCY_MODIFIER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlist: currencyModifiersList(action, state.list)\n\t\t\t}\n\n\t\tcase C.REMOVE_CURRENCY_MODIFIER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlist: currencyModifiersList(action, state.list)\n\t\t\t}\n\n\t\tcase C.SET_CURRENCY_MODIFIER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrency: currencyModifier(action, state.currency)\n\t\t\t}\n\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const modificators = (state = {currencies: currencyModifiers()}, action = {}) => {\n\tswitch (action.type) {\n\t\tcase C.SET_CURRENCY_MODIFIERS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrencies: currencyModifiers(action, state.currencies)\n\t\t\t}\n\n\t\tcase C.ADD_CURRENCY_MODIFIER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrencies: currencyModifiers(action, state.currencies)\n\t\t\t}\n\n\t\tcase C.REMOVE_CURRENCY_MODIFIER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrencies: currencyModifiers(action, state.currencies)\n\t\t\t}\n\n\t\tcase C.SET_CURRENCY_MODIFIER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrencies: currencyModifiers(action, state.currencies)\n\t\t\t}\n\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const dimensions = (state = {scroll: scrollDimensions()}, action = {}) => {\n\tswitch (action.type) {\n\t\tcase C.SET_SCROLL_DIAMENTIONS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tscroll: scrollDimensions(action, state.scroll)\n\t\t\t}\n\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const scrollDimensions = (action = {}, state = { scrollbarHeight: 0, scrollbarWidth: 0 }) => {\n\tswitch (action.type) {\n\t\tcase C.SET_SCROLL_DIAMENTIONS: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...action.dimensions\n\t\t\t}\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n","export const dafaultFetchState = () => ({\n\tfetching: false,\n\tfetched: false,\n\terror: false\n})\nexport const startFetchState = () => ({\n\tfetching: true,\n\tfetched: false,\n\terror: false\n})\nexport const successFetchState = () => ({\n\tfetching: false,\n\tfetched: true,\n\terror: false\n})\nexport const errorFetchState = () => ({\n\tfetching: false,\n\tfetched: false,\n\terror: true\n})\n","/*eslint no-console: 0*/\n/** global: localStorage */\nimport { createStore, combineReducers, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk';\nimport { tickets, currencies, filters, modificators, dimensions } from './reducers'\nimport stateData from '../data/initialState'\n\n// const logger = store => next => action => {\n// \tlet result\n// \tconsole.groupCollapsed('dispatching', action.type)\n// \tconsole.log('prev state', store.getState())\n// \tconsole.log('action', action)\n// \tresult = next(action)\n// \tconsole.log('next state', store.getState())\n// \tconsole.groupEnd()\n// \treturn result\n// }\n\nconst saver = store => next => action => {\n\tlet result = next(action)\n\tlocalStorage['aviasales-store'] = JSON.stringify(store.getState())\n\treturn result\n}\n\nconst storeFactory = (initialState = stateData) =>\n\tapplyMiddleware(/*logger, */saver, thunk)(createStore)(\n\t\tcombineReducers({ tickets, currencies, filters, modificators, dimensions }),\n\t\t(localStorage['aviasales-store']) ?\n\t\t\tJSON.parse(localStorage['aviasales-store']) :\n\t\t\tinitialState\n\t)\n\nexport default storeFactory\n","/*eslint no-console: 0*/\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === '[::1]' ||\n\t\t// 127.0.0.1/8 is considered localhost for IPv4.\n\t\twindow.location.hostname.match(\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t\t)\n)\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config)\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t\t'worker. To learn more, visit http://bit.ly/CRA-PWA'\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config)\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunction registerValidSW(swUrl, config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then(registration => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.')\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error('Error during service worker registration:', error)\n\t\t})\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl)\n\t\t.then(response => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get('content-type')\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload()\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config)\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log(\n\t\t\t\t'No internet connection found. App is running in offline mode.'\n\t\t\t)\n\t\t})\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\tregistration.unregister()\n\t\t})\n\t}\n}\n","import React from 'react'\nimport { render } from 'react-dom'\nimport { Provider } from 'react-redux'\nimport './assets/styles/index.scss'\nimport App from './components/App'\nimport storeFactory from './store'\nimport * as serviceWorker from './serviceWorker'\n\nconst store = storeFactory()\n\nwindow.React = React\nwindow.store = store\n\nrender(\n\t<Provider store={store}>\n\t\t<App />\n\t</Provider>,\n\tdocument.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","module.exports = __webpack_public_path__ + \"static/media/turkish-airlines-logo.213d290e.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.9a2b9fa2.png\";"],"sourceRoot":""}